!function(){"use strict";Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,a=function(){},i=function(){return n.apply(this instanceof a?this:e,t.concat(Array.prototype.slice.call(arguments)))};return a.prototype=this.prototype,i.prototype=new a,i})}();var PureJSImageGallery=function(){"use strict";function e(){return document.body.addEventListener?"addEventListener":"attachEvent"}function t(){return document.body.addEventListener?"":"on"}function n(){this.imageClass=".gallery",this.loadingMessage="Loading...",this.nextButtonLabel=">",this.previousButtonLabel="<",this.closeButtonLabel="X"}return n.prototype={constructor:n,currentElement:null,init:function(e){this.imageClass=e.imageClass?e.imageClass:this.imageClass,this.loadingMessage=e.loadingMessage?e.loadingMessage:this.loadingMessage,this.nextButtonLabel=e.nextButtonLabel?e.nextButtonLabel:this.nextButtonLabel,this.previousButtonLabel=e.previousButtonLabel?e.previousButtonLabel:this.previousButtonLabel,this.closeButtonLabel=e.closeButtonLabel?e.closeButtonLabel:this.closeButtonLabel,this.addImagesClick()},addImagesClick:function(){for(var e=document.querySelectorAll(this.imageClass),t=e.length,n=0;n<t;n++)this.addEvent(e[n],this.openGallery)},createGallery:function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("span"),a=document.createElement("span"),i=document.createElement("span");return n.setAttribute("class","pure-js-image-gallery__next"),a.setAttribute("class","pure-js-image-gallery__previous"),i.setAttribute("class","pure-js-image-gallery__close"),e.setAttribute("class","pure-js-image-gallery"),t.setAttribute("class","pure-js-image-gallery__image-wrapper"),n.appendChild(document.createTextNode(this.nextButtonLabel)),a.appendChild(document.createTextNode(this.previousButtonLabel)),i.appendChild(document.createTextNode(this.closeButtonLabel)),t.appendChild(this.getLoadingElement()),e.appendChild(t),e.appendChild(n),e.appendChild(a),e.appendChild(i),e},openGallery:function(e){var t=this.getCurrentTarget(e);this.closeGallery(),document.body.appendChild(this.createGallery()),this.setCurrentElement(t),this.imageCreate(t),this.activeDiretionalButtons(),this.activeCloseButton()},activeDiretionalButtons:function(){var e=document.querySelector(".pure-js-image-gallery__next"),t=document.querySelector(".pure-js-image-gallery__previous");this.addEvent(e,this.imageChange),this.addEvent(t,this.imageChange)},imageChange:function(e){var t=this.getCurrentTarget(e).getAttribute("class"),n="pure-js-image-gallery__next"===t?this.getNext():this.getPrevious();n&&(this.setCurrentElement(n),this.imageCreate(n))},activeCloseButton:function(){var e=document.querySelector(".pure-js-image-gallery__close");this.addEvent(e,this.closeGallery)},closeGallery:function(){var e=document.querySelector(".pure-js-image-gallery");e&&document.body.removeChild(e)},imageCreate:function(e){var t=new Image,n=e.getAttribute("data-image-url");n&&(t.src=n,t.setAttribute("class","pure-js-image-gallery__photo"),this.imageLoading(t))},imageLoading:function(e){var t=null,n=this.showImage.bind(this);this.removeImage(),t=setInterval(function(){e.complete&&(clearInterval(t),n(e))},1)},getLoadingElement:function(){var e=document.createElement("strong"),t=document.createTextNode(this.loadingMessage);return e.setAttribute("class","pure-js-image-gallery__loading"),e.appendChild(t),e},removeImage:function(){var e=document.querySelector(".pure-js-image-gallery__image-wrapper"),t=e.querySelector(".pure-js-image-gallery__photo");t&&(e.removeChild(t),e.appendChild(this.getLoadingElement()))},showImage:function(e){var t=document.querySelector(".pure-js-image-gallery__image-wrapper"),n=t.querySelector(".pure-js-image-gallery__loading");n&&t.removeChild(n),t.appendChild(e)},setCurrentElement:function(e){this.currentElement=e},getNext:function(){return this.getElement("nextSibling")},getPrevious:function(){return this.getElement("previousSibling")},getElement:function(e){for(var t=this.currentElement.parentNode[e];t&&1!==t.nodeType;)t=t[e];return t?t.querySelector(this.imageClass):null},getCurrentTarget:function(e){return e.target?e.target:e.srcElement},addEvent:function(n,a){var i=a.bind(this);n[e()](t()+"click",function(e){i(e)})}},new n};